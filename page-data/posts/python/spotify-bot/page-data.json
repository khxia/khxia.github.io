{"componentChunkName":"component---src-templates-blog-template-js","path":"/posts/python/spotify-bot","result":{"data":{"markdownRemark":{"html":"<h2>Background</h2>\n<p>Recently, I learnt about Github Actions from this <a href=\"https://galenwong.github.io/blog/2020-08-16-youtube-mymix/\">really cool guy</a> and how we can take advantage of that to run regular jobs. Given that I had always wanted to try to do something with  <a href=\"https://developer.spotify.com/\">Spotify for Developers</a>, I decided to give it a shot and write a script that automatically updates my favorite music list based on my recent Spotify favourites. </p>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/38a65/githubA.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQoz42RzU7DMBCE8/48AUcOIC5IqOIA4gBcEByQilRKS1oKCU7s2A6t0kBTnB1sB0FV/jKyVtqVP89oHWBF5KsoMFJ4M35CH8MfFayR8wq719g4Q4+71tRuTi3hyqDTx9aVM2/gyrRwbkJaTTQ2L7HXw/4NDofY6WK2+Hr9H5jNcBE5+OAWR3fY7qJctoF9nb7i9B7HIc4fEU8xkL8mD9b6xnysqdOnkzGFkizsnakmp7/gTy1qLP2qq7rFwowxUcyUygfDMGLpE2NFMZ88REopIVXKRcwSnT/7dPTtq4iyTEmlEy5SntmrZfnChbSA0jpJuT1a56vwO0qzQ53bSh0NAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"githubA\"\n        title=\"githubA\"\n        src=\"/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/c5bb3/githubA.png\"\n        srcset=\"/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/04472/githubA.png 170w,\n/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/9f933/githubA.png 340w,\n/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/c5bb3/githubA.png 680w,\n/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/b12f7/githubA.png 1020w,\n/static/e560bdaed21ad0a2d77d1ac2f12c1fd7/38a65/githubA.png 1075w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<blockquote>\n<details>\n<summary> > Click to say hello to Spotify-chan</summary>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 460px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d74b20bfefb2e36a676f11a090b169ca/e41a8/spotify-chan.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMEAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgD/2gAMAwEAAhADEAAAAfM1VxB2mdpmEyDf/8QAHRAAAgIBBQAAAAAAAAAAAAAAAQIAEQMEEBITFP/aAAgBAQABBQIgTrcqeKltNWINST0Zarb/xAAVEQEBAAAAAAAAAAAAAAAAAAAQAv/aAAgBAwEBPwEo/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHxAAAgEEAgMAAAAAAAAAAAAAAAERAhITIQMQUnGB/9oACAEBAAY/Avo3TbjWmWvjUoySvUFVPkbIuJ6//8QAHBABAAMAAgMAAAAAAAAAAAAAAQARIRAxUXHR/9oACAEBAAE/IVuYYxll7GhsbukHX7LUYEVNC1rHvygVePUpWN4//9oADAMBAAIAAwAAABAbEED/xAAYEQEAAwEAAAAAAAAAAAAAAAABABAhEf/aAAgBAwEBPxDR2D0jcr//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QtCK//8QAGxABAAMBAQEBAAAAAAAAAAAAAQARMSFhQYH/2gAIAQEAAT8QCrLQdO+/kOCpxYoV5vRu47Aqwgo1cIRWwHW1sNvEFtDkFpYLtK3NUImb7va9l7f0levPZ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spotify-chan\"\n        title=\"spotify-chan\"\n        src=\"/static/d74b20bfefb2e36a676f11a090b169ca/e41a8/spotify-chan.jpg\"\n        srcset=\"/static/d74b20bfefb2e36a676f11a090b169ca/651be/spotify-chan.jpg 170w,\n/static/d74b20bfefb2e36a676f11a090b169ca/d30a3/spotify-chan.jpg 340w,\n/static/d74b20bfefb2e36a676f11a090b169ca/e41a8/spotify-chan.jpg 460w\"\n        sizes=\"(max-width: 460px) 100vw, 460px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</details>\n</blockquote>\n<h3>What is Github Actions?</h3>\n<p><a href=\"https://github.com/features/actions\">Github Actions</a> is essentially a tool provided by Github to automate your workflows and to provide CI/CD inside of Github itself. What does that mean? I learnt that at a simple level, it means that we can configure Github to run workflows (scripts, job) that enable us to: build a container, deploy a web service, test your application etc. </p>\n<p>Since I want to build an automated job that will update my favourites music list and then display it onto this website, I will need to utilize Github Actions.</p>\n<p>Hence, I split the task into two:</p>\n<ol>\n<li>Write the script to update the music list first. </li>\n<li>Figure out how to automatically run that script via Github Actions later.</li>\n</ol>\n<h2>Spotify API</h2>\n<p>First step is to set up a Spotify Developer account and complete the necessary steps to obtain the credentials. </p>\n<blockquote>\n<p>Credentials for what?</p>\n</blockquote>\n<p>After investigating into the Spotify Developers API, it looks like we want to use the <a href=\"https://developer.spotify.com/documentation/web-api/reference/#endpoint-get-users-saved-tracks\">get user's saved tracks</a> API to get all the tracks that I have liked on Spotify:</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">GET https://api.spotify.com/v1/me/tracks</code></pre></div>\n<p>Since this requires an authentication token, we need to use one of Spotify's authorization flows to obtain it. </p>\n<h3>Authentication</h3>\n<p>There are four main authentication flows:</p>\n<ol>\n<li>Refreshable user authentication: <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow\">Authorization Code Flow</a></li>\n<li>Refreshable user authentication: <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow-with-proof-key-for-code-exchange-pkce\">Authorization Code Flow with Proof Key For Code Exchange (PKCE)</a></li>\n<li>Temporary user authentication: <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#implicit-grant-flow\">Implicit Grant</a></li>\n<li>Refreshable app authorization: <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#client-credentials-flow\">Clients Credentials Flow</a></li>\n</ol>\n<p>At first glance, it seems that number four, seems very attractive because it's designed for server to server communication.</p>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/99a16b36e39038b896a8d1150b24ccfa/00172/client_credentials_flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAACqElEQVQ4y1VT6W7TQBDuG/U9qNRfIB4wfxCHhFBVkKgg6RW1NWnjHE7spE3io/ba3l3ft8tnO4AYjSbj3flmZ76ZHHh+4FKmE65a3LC5Rjh8nOC8bIV7PmOeQ9nYlCfmSiE7fFLK/SA8wB1xqKyy+Y7Nt2yxa9R2XJy/tEKYO1QnF+rD5/Xg51Y4fbq+VB9utRn3/QMOE4RpmiaNxPiF4iQMo5OTk36/H8WxF/gxrhLEpHGS4AQgrwF7flEUeVGUZVVWVWfzPF+tHw8PD4+Pj+EgNc6Lsqgq2LKu6yzL/4Ep45ZFLIJ6KececgVBKAiCJElBGBVN5x4ubcexbQcv53nxF1yiNySjlCER/Pql3my20+l0NptputE1n6YZAkBhF7wHp1lW7qUqWkHfKCFshTKW5U1bULTTRpVxku7BiMNsoCgenxgSLMruSoCPK9hn01rKShcPRch/4KfNdixOhF8j6HwuEUJM05RXymIpy8pKnE7hdPF2A/7zMlKDD2mx3Kka6IUaz2Y3P+oym7hQx3YZ5a16nHpBtySgGM+axJ5Li5Zsv6myLbuq62tDHGijK0M81+4vtIcrXYQ9296OidKAsSVRFGMrVFXFGMIo8hps2Ov13n/88FW/ubPmC74V6XpGHyX2tGCbgTEa6PcNuOGvqgBGnQBjB8CqslofvTp6/fbNO+HUTzryXjoKYfXIvjTG+yVh6BlNOxStwkc6sCAv5aUif9sNWeKbJgEzpmWpuu7arhpaFx0YoSjScVxsGK4xWwwW/DJKLYd8mnyP8iQKIjAHtiilSZAYkdO+zD0sCcqO4wSVg96qqmHHoqjIymQ26d19QZF+HrIs4FkAGxaxxDZ99IzV7RYDFHXqtf+YJM1atqshmf7QhXPjfrDXEfwz7XbsKL8BTpCjF2wvDz8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"client credentials flow\"\n        title=\"client credentials flow\"\n        src=\"/static/99a16b36e39038b896a8d1150b24ccfa/c5bb3/client_credentials_flow.png\"\n        srcset=\"/static/99a16b36e39038b896a8d1150b24ccfa/04472/client_credentials_flow.png 170w,\n/static/99a16b36e39038b896a8d1150b24ccfa/9f933/client_credentials_flow.png 340w,\n/static/99a16b36e39038b896a8d1150b24ccfa/c5bb3/client_credentials_flow.png 680w,\n/static/99a16b36e39038b896a8d1150b24ccfa/b12f7/client_credentials_flow.png 1020w,\n/static/99a16b36e39038b896a8d1150b24ccfa/00172/client_credentials_flow.png 1044w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<p>As seen in the diagram above, all we need to do is save our <code class=\"language-text\">client_id</code>, <code class=\"language-text\">client_secret</code>, and <code class=\"language-text\">grant_type</code> in some sort of environment variable, and then all the script needs to do is to request the access token from Spotify via another API, and then we can use that access token to call the <code class=\"language-text\">get user&#39;s saved tracks</code> API. </p>\n<p>But unfortunately, this doesn't work like we expect it to.</p>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 261px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/277906ca898eaf227079cb4e2e0e5f01/677e6/masaka.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.35294117647058%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAwT/2gAMAwEAAhADEAAAAYrLlsgdQf/EABoQAAICAwAAAAAAAAAAAAAAAAABETECEkH/2gAIAQEAAQUC5Y7yctQaSf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AVf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGBAAAgMAAAAAAAAAAAAAAAAAARAAMVH/2gAIAQEABj8CDwK5/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARQTFhkf/aAAgBAQABPyFUK+eQTuXvQ1B3hRr8i1ep/9oADAMBAAIAAwAAABDrL//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxBS1f/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EIh//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFBYf/aAAgBAQABPxB3BPRRjj0jm9mfWNGTL1SgKWZKd+iViw1VT//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"masaka\"\n        title=\"masaka\"\n        src=\"/static/277906ca898eaf227079cb4e2e0e5f01/677e6/masaka.jpg\"\n        srcset=\"/static/277906ca898eaf227079cb4e2e0e5f01/651be/masaka.jpg 170w,\n/static/277906ca898eaf227079cb4e2e0e5f01/677e6/masaka.jpg 261w\"\n        sizes=\"(max-width: 261px) 100vw, 261px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<p>Yes, the reason why it doesn't work is because this authorization flow does not include\n<strong>authentication</strong>, which means that we are unable to access user information (even though we supplied it our <code class=\"language-text\">client_id</code> and <code class=\"language-text\">client_secret</code>). To learn more, you can read about IETF policy from <a href=\"https://datatracker.ietf.org/doc/html/rfc6749\">RFC 6749</a>.</p>\n<blockquote>\n<p>Great, now that 30 minutes of my life was wasted, let's try another authentication flow.</p>\n</blockquote>\n<p>After looking, it seems that the next best option that fits our purpose is the <strong>authorization code flow</strong>.</p>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/455b60c5b2bbdb4975b42c88c36dad46/d53ff/auth_code_flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjklEQVQ4y21TyVLbQBD196cgZ3LiRBU3CAcOFFcqh1CFTdhsZK22tcxom31Gks2TOSSh3CXLo65e3nvdM9lut9oYLjWTGm+l9bA3pU0rBRF1I7lUCmHOdTgoOT5Sa+fcBN6yrFdZleR1nFZlVfXDsNvtSF15Wfya+e9ZFBfpdtgqYwpKaU7KtMgJFVJO0IQL2XWdVqpzFvUuLi7Ozs7gRAejDHxNy+q6zrJcSoUIY2FOKT3p+94Yy7iYLzxCSwC5vb29ubmBc71JfT8Mo4Rxbp1FK611VaFOY6wB2bEzvJwLlMcBVNfrdZZlQkjGeNuypm2BAlwQjWSEQBf88N5zRrGmDaP46fnF831gAos4WUVxHCcJDkEYjrDzPIyid88rgLCqUQWdt+gAkHXTlGWJkldXV+fn52jQoCljY3/GUQ6egpRIw4Psz+QBCPFBIXrTQonr6+vLy5/ajCSDKCrrymBKXQ+cCPua/EkDnNEIpJe+HwSBFMpp29YthmS1ha4Hkv9yDqOH6Wz2+AimEGa2XvwKZ7/jp4d0fr9+Nb3V2gD1184QE7DavWFmi/nizVvc14tluwrEJuLZXfansswZB6X+S+ZCYJ5QMs8L/IPB6enpt+9Hz4XvhK1J7ZgJmg017YHkqqoIpWo0gDUogeEso+AumrJepYwyJ6fl++FkjAIuoMX08OA8br9WLxt/Gr/NkvlbET6lS9O7A5wxTOiM8IIQ3AqQPzn5cXR8jItjtems2w07o6D2cEBtiIQ5o8RqvUFndPV93/O8/c1TUAGborFzfYfN/ZoMzpRisbBPDbaXEIpRrVZJmmZCCqCEEuNuH5wz55yQkQss3JsAEimxrXRv2C3cU9xwDLX7x/D5AdDT6kmjF0ZaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"auth_code_flow\"\n        title=\"auth_code_flow\"\n        src=\"/static/455b60c5b2bbdb4975b42c88c36dad46/c5bb3/auth_code_flow.png\"\n        srcset=\"/static/455b60c5b2bbdb4975b42c88c36dad46/04472/auth_code_flow.png 170w,\n/static/455b60c5b2bbdb4975b42c88c36dad46/9f933/auth_code_flow.png 340w,\n/static/455b60c5b2bbdb4975b42c88c36dad46/c5bb3/auth_code_flow.png 680w,\n/static/455b60c5b2bbdb4975b42c88c36dad46/b12f7/auth_code_flow.png 1020w,\n/static/455b60c5b2bbdb4975b42c88c36dad46/d53ff/auth_code_flow.png 1068w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<p>This authorization code flow will require a bit of manual work from us. First, we still use our <code class=\"language-text\">client_id</code> (obtainable from your Spotify Developer Account Project's dashboard), as well as some parameters to request an <code class=\"language-text\">authorization code</code>. This will probably open up a browser window where you will need to login through your Spotify account.</p>\n<p>The docs give pretty detailed instructions, but the link to request looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">https://accounts.spotify.com/authorize?client_id={client_id}&amp;response_type=code&amp;redirect_uri={some_redirect_uri}&amp;scope=user-library-read%20playlist-modify-public%20&amp;state={optional}</code></pre></div>\n<p>It is important to note that you will need the <code class=\"language-text\">user-library-read</code> as one of your scopes. The way these scopes work is that we can control what the authorization token that we obtain, is allowed to do. This is safer because if this token somehow gets leaked, it can only do what you allowed it to do, hence the hacker can only \"read from our song library\", instead  of being able to, let's say, \"delete all your playlists\". This is why you should only include the scope that you require for your code. However, I also had to include the <code class=\"language-text\">playlist-modify-public</code> scope because I ended up doing some playlist modifying at the end.</p>\n<blockquote>\n<p>You will need to add the redirect_uri as a redirect_uri in your Spotify Developer Project's dashboard.</p>\n</blockquote>\n<p>After obtaining the <strong>authorization code</strong>, you can use this code to (manually) request for an <code class=\"language-text\">access_token</code> and <code class=\"language-text\">refresh_token</code>. This <code class=\"language-text\">refresh_token</code> is the one that we need. From now on, whenever we run our script, the script first needs to use the <code class=\"language-text\">refresh_token</code> to request a <strong>new</strong> <code class=\"language-text\">access_token</code>. It can then use this <code class=\"language-text\">access_token</code> to do API requests on the Spotify Web API.</p>\n<p>If you're confused, just follow the <a href=\"https://developer.spotify.com/documentation/general/guides/authorization-guide/#authorization-code-flow\">step by step instructions</a> on the documentation which gives a detailed guide on how to obtain the access token.</p>\n<h3>Using the Web API</h3>\n<p>So I've been talking about \"the script this\", \"the script that\". But how are we going to write it? That should be very simple using the <code class=\"language-text\">requests</code> library in Python. So let's get started.</p>\n<p>First, let's load in the credentials that we just obtained.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">CLIENT_ID <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'CLIENT_ID'</span><span class=\"token punctuation\">]</span>\nCLIENT_SECRET <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'CLIENT_SECRET'</span><span class=\"token punctuation\">]</span>\nREFRESH_TOKEN <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">'REFRESH_TOKEN'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 315px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c06001154eb13acf76b5e159db7ea5e2/a6688/keqing.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIEA//EABcBAQEBAQAAAAAAAAAAAAAAAAIBAAP/2gAMAwEAAhADEAAAAZ6RqeyKU3IelhT/xAAbEAADAQADAQAAAAAAAAAAAAAAAQIDERIhE//aAAgBAQABBQKPTrI/DGVRpn1HyzJfSYhOT//EABgRAQEAAwAAAAAAAAAAAAAAAAEAECEx/9oACAEDAQE/AQ1Mcx//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAgEBPwFj/8QAGxAAAwACAwAAAAAAAAAAAAAAAAERECEiMVH/2gAIAQEABj8C2dGkiNwtNHId8x//xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhMUFxUWH/2gAIAQEAAT8hdHCpxRnpyaBB5Ln832CatPkvX1D6riInYM6pg0Yn/9oADAMBAAIAAwAAABCkDwP/xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhEP/aAAgBAwEBPxA20DeQZ5//xAAYEQADAQEAAAAAAAAAAAAAAAAAAREhEP/aAAgBAgEBPxDDhpXHz//EABwQAQEAAgMBAQAAAAAAAAAAAAERACExQWHBcf/aAAgBAQABPxDT2gN40jeu4NiAlKu/chEO3C6fMCsGrYfuADEGQgqK98z5jwME6NExiFDP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"keqing\"\n        title=\"keqing\"\n        src=\"/static/c06001154eb13acf76b5e159db7ea5e2/a6688/keqing.jpg\"\n        srcset=\"/static/c06001154eb13acf76b5e159db7ea5e2/651be/keqing.jpg 170w,\n/static/c06001154eb13acf76b5e159db7ea5e2/a6688/keqing.jpg 315w\"\n        sizes=\"(max-width: 315px) 100vw, 315px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<p>Wait what, what's <code class=\"language-text\">CLIENT_SECRET</code>? So <code class=\"language-text\">client_id</code> and <code class=\"language-text\">client_secret</code> can both be obtained in your Spotify Developer dashboard, while <code class=\"language-text\">REFRESH_TOKEN</code> is the token that you just obtained from the authentication flow. Make sure to never leak it. I recommend that you save these variables in a <code class=\"language-text\">credentials.json</code> file, and then add these variables as <a href=\"https://docs.github.com/en/actions/reference/encrypted-secrets\">secrets</a> in your Github repository. You can then add these secrets as environment variables when running the script. That is what I did here too using  <code class=\"language-text\">os.environ</code>. (More on this later).</p>\n<p>Next step, we need to use our refresh token to create our access token. </p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\">auth_string <span class=\"token operator\">=</span> CLIENT_ID <span class=\"token operator\">+</span> <span class=\"token string\">':'</span> <span class=\"token operator\">+</span> CLIENT_SECRET\nauth_encoding <span class=\"token operator\">=</span> <span class=\"token string\">'Basic '</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>base64<span class=\"token punctuation\">.</span>b64encode<span class=\"token punctuation\">(</span>auth_string<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">\"ascii\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nauth_r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string\">'https://accounts.spotify.com/api/token'</span><span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'grant_type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'refresh_token'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'refresh_token'</span><span class=\"token punctuation\">:</span> REFRESH_TOKEN<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> auth_encoding<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nres <span class=\"token operator\">=</span> auth_r<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nACCESS_TOKEN <span class=\"token operator\">=</span> res<span class=\"token punctuation\">[</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>The above code first builds the <code class=\"language-text\">auth_encoding</code>, which is a special string format that Spotify requires as the authorization format. The special string has the form:</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">Basic base64_encoded(CLIENT_ID:CLIENT_SECRET)</code></pre></div>\n<p>After building the <code class=\"language-text\">auth_encoding</code>, we just pass in the arguments required (as specified in authorization flow guide) to the <code class=\"language-text\">https://accounts.spotify.com/api/token</code> API and then we will have our <code class=\"language-text\">ACCESS_TOKEN</code> that we can use to call the Spotify API.</p>\n<p>After this, we just need to call the <strong>get user's saved tracks</strong> API to get our most recently liked songs:</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token comment\"># Get the 25 most recently liked tracks</span>\ntracks_r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.spotify.com/v1/me/tracks?limit=25'</span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> auth_string_bearer<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nul_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nrandom<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Pick 10 random tracks from those 25 tracks</span>\nrandom_list <span class=\"token operator\">=</span> random<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nliked_tracks <span class=\"token operator\">=</span> tracks_r<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'items'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># Extract the track name, artist, and URL for those tracks</span>\n<span class=\"token keyword\">for</span> index <span class=\"token keyword\">in</span> random_list<span class=\"token punctuation\">:</span>\n    track <span class=\"token operator\">=</span> liked_tracks<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span>\n    song_url <span class=\"token operator\">=</span> track<span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'external_urls'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'spotify'</span><span class=\"token punctuation\">]</span>\n    name <span class=\"token operator\">=</span> track<span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span>\n    artist <span class=\"token operator\">=</span> track<span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'artists'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span>\n    artist_url <span class=\"token operator\">=</span> track<span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'artists'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'external_urls'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'spotify'</span><span class=\"token punctuation\">]</span>\n    ul_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'&lt;li>&lt;a href=\\'</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>song_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">\\'></span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span><span class=\"token string\">&lt;/a> - &lt;a href=\\'</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>artist_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">\\'></span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>artist<span class=\"token punctuation\">}</span></span><span class=\"token string\">&lt;/a>&lt;/li>'</span></span><span class=\"token punctuation\">)</span>\n\nul_list <span class=\"token operator\">=</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>ul_list<span class=\"token punctuation\">)</span>\nul_list <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'&lt;ul></span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>ul_list<span class=\"token punctuation\">}</span></span><span class=\"token string\">&lt;/ul>'</span></span>\n\n<span class=\"token comment\"># Inject the list into our file as HTML</span>\n\nstart_marker <span class=\"token operator\">=</span> <span class=\"token string\">'{/* SPOTIFY MIX STARTS HERE */}'</span>\nend_marker <span class=\"token operator\">=</span> <span class=\"token string\">'{/* SPOTIFY MIX ENDS HERE */}'</span>\n\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>filepath<span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    oldfile <span class=\"token operator\">=</span> f<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nstart_index <span class=\"token operator\">=</span> oldfile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span>start_marker<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>start_marker<span class=\"token punctuation\">)</span>\nend_index <span class=\"token operator\">=</span> oldfile<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span>end_marker<span class=\"token punctuation\">)</span>\n\nnewfile <span class=\"token operator\">=</span> oldfile<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span>start_index<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">'\\n'</span> <span class=\"token operator\">+</span> ul_list <span class=\"token operator\">+</span> <span class=\"token string\">'\\n'</span> <span class=\"token operator\">+</span> oldfile<span class=\"token punctuation\">[</span>end_index<span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>filepath<span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>newfile<span class=\"token punctuation\">)</span></code></pre></div>\n<p>The above code basically:</p>\n<ol>\n<li>Get the 25 most recently liked tracks from the Spotify Web API</li>\n<li>Pick 10 random tracks from those 25 tracks</li>\n<li>Extract the track name, artist, and URL for those tracks</li>\n<li>Inject the list into our file as HTML (in my case, I chose to inject it into my \"aboutme.js\" file that can be viewed <a href=\"https://khxia.github.io/aboutme\">here</a>)</li>\n</ol>\n<h2>Github Actions</h2>\n<p>Since I have already wrote the Python script to update this website, I needed to use Github Actions to run this regularly.</p>\n<p>One of the ways to do this is by creating a <code class=\"language-text\">.github/workflows</code> folder in the root directory of the repo. Afterwards, I can create a <code class=\"language-text\">deploy.yaml</code> file that specifies the deployment flow. </p>\n<h3>Github Encrypted Secrets</h3>\n<p>Before we get to writing the <code class=\"language-text\">deploy.yaml</code> file, there is one more step and that is to add variables that we saved in the <code class=\"language-text\">credentials.json</code> file to the Github Repository that you want to run the Github Action on. Why? Well, it's obvious that we don't want to commit the <code class=\"language-text\">credentials.json</code> file to the Github Repo because otherwise everyone will be able to see the access tokens. </p>\n<p>But if it isn't commited to the Github Repo, how does Github know the value of the access token when it runs our script? The answer to is that is through <a href=\"https://docs.github.com/en/actions/reference/encrypted-secrets\">Github Encrypted Secrets</a>, which allows us to store sensitive information in organizations, repositories, or repository environments.  </p>\n<blockquote>\n<p>Follow the instructions in the documentation to add <code class=\"language-text\">CLIENT_ID</code>, <code class=\"language-text\">CLIENT_SECRET</code>, <code class=\"language-text\">REFRESH_TOKEN</code>, and <code class=\"language-text\">AUTH_CODE</code> to your Github Repository.</p>\n</blockquote>\n<h3>Setting up the workflow environment</h3>\n<p>At the top of <code class=\"language-text\">deploy.yaml</code> file, we want to specify the name of our Action and when it will run.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Update music taste\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> \n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> dev2\n  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">cron</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'0 0 * * *'</span></code></pre></div>\n<p>The name of the Action is the name you will see on the 'Actions' tab on Github when you it runs. We use the <code class=\"language-text\">on</code> key for specifying when we want this Action to be run. In this case, I want it to run when someone pushes onto the <code class=\"language-text\">dev2</code> branch of the repository, as well as a cronjob that runs every 24 hours. </p>\n<p>Next step, is to set up job that we will run, as well as the steps that we need to take. </p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">update-aboutme-page</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> spotify music\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span> \n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set Up Python\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>python@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">python-version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3.8</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/cache@v2\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> configure pip caching\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> ~/.cache/pip\n          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> runner.os <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>pip<span class=\"token punctuation\">-</span>$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> hashFiles('<span class=\"token important\">**/requirements.txt')</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">restore-keys</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            ${{ runner.os }}-pip-</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install Python dependencies\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          python -m pip install -r requirements.txt</span></code></pre></div>\n<p>For our purposes, we can imagine that we are running our script on a completely clean machine (on the latest ubuntu distro) that has nothing installed on it. Hence, we need to do some set up first. This involves:</p>\n<ol>\n<li>Checkout the current reposistory so the workflow can access it (note that only a <strong>single commit</strong> is fetched by default). </li>\n<li>Set up Python (with version 3.8)</li>\n<li>Configure pip caching so that we can install our dependencies faster.</li>\n<li>Actually install our dependencies. (In my case, I have a <code class=\"language-text\">requirements.txt</code> file with the needed Python dependencies to run our script)</li>\n</ol>\n<p>Note that I am not actually running any commands myself. I am using the <code class=\"language-text\">uses</code> key to use the custom Actions that other people wrote. </p>\n<blockquote>\n<p>Why?</p>\n</blockquote>\n<p>Well because, fetching a repo, setting up Python, and configuring pip caching are quite common steps that many people will use when setting up their environment. So why should we keep copy pasting? Hence, it is much more maintainable and cleaner to use the custom Actions that other people write (almost like importing a library) to achieve the same purpose - no need to copy and paste a bunch of commands to run. </p>\n<p>You'll see that for the 'install python dependencies' step, we actually do need to <code class=\"language-text\">run</code> our own command to install dependencies: <code class=\"language-text\">python -m pip install -r requirements.txt</code>. </p>\n<h3>Running our script</h3>\n<p>Now, we can actually run our script as our next <code class=\"language-text\">step</code>. </p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Write Spotify Mix\n    <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span> \n        <span class=\"token key atrule\">CLIENT_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.SPOTIFY_CLIENT_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">CLIENT_SECRET</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.SPOTIFY_SECRET <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">REFRESH_TOKEN</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.SPOTIFY_REFRESH_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">AUTH_CODE</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.SPOTIFY_AUTH_CODE <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        python write_spotify_songs.py</span></code></pre></div>\n<p>Quite self-explanatory. We <code class=\"language-text\">run</code> our Python script that I named <code class=\"language-text\">write_spotify_songs.py</code>. Notice that we can access the secrets that we added by using: <code class=\"language-text\">${{ secrets.MY_SECRET }}</code>, after which we can then pass it as a value into Python's <code class=\"language-text\">os.env</code> variable. </p>\n<h3>Finishing up</h3>\n<p>So now that we've run our Python script and have edited the file to show the new Spotify list, we now need to let everyone know about it. Right now, the new file only exists on one of Github's Ubuntu machines, we need to do two things:</p>\n<ol>\n<li>Commit and Push the changes onto the Github Repo</li>\n<li>Build and Publish the new Gatsby page using Github Pages.</li>\n</ol>\n<p>Thankfully, there are already custom Actions that do this for us. We simply have to use them:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> stefanzweifel/git<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>commit<span class=\"token punctuation\">-</span>action@v4\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> commit and push\n<span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span> \n    <span class=\"token key atrule\">commit_message</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Update Spotify Mix\"</span>\n    <span class=\"token key atrule\">file_pattern</span><span class=\"token punctuation\">:</span> src/pages/<span class=\"token important\">*.js</span>\n    <span class=\"token key atrule\">commit_user_name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'my_spotify_mix_bot'</span>\n    <span class=\"token key atrule\">push_options</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'--force'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy to github pages\n<span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.PERSONAL_ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> master</code></pre></div>\n<p>You'll see that it's quite self-explanatory. We commit all files with the <code class=\"language-text\">file_pattern: src/pages/*.js</code>, and we can also set a commit username (by default, it will use your Github username). It's also worth noting that:</p>\n<ul>\n<li>Since the branch we pull and push from is the <code class=\"language-text\">dev2</code> branch, when deploying to Github Pages, we need to specify our <code class=\"language-text\">deploy-branch</code>. In this case, I personally use the <code class=\"language-text\">master</code> branch for deploying to Github pages</li>\n<li>To deploy to Github Pages, you will need to also add a <code class=\"language-text\">PERSONAL_ACCESS_TOKEN</code> to your Github Secrets. Is it safe to pass your <code class=\"language-text\">PERSONAL_ACCESS_TOKEN</code> into someone else's program? Probably not. But we can overlook that for the convenience that it gives us. (Gatsby build and deployment is a pain).</li>\n</ul>\n<p>Now, my website now looks like this:</p>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ded221464d4a63dccad0a8421c57bfda/18c13/spotify_list.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABJ0AAASdAHeZh94AAABMklEQVQ4y51T226DMAzl/z9wL33YtAJdKZc0MCAX59Q2Y+qqtR2zdOTYUY6O7TjbvezQVhUQiBH/jviFNSZCApC9vb6jbmrMzsF5t3iG914xz7Pm3VU8McZpUqznKORCeDwdcTxVKA8HlGWJA/uiKPVc5AX2+73m8jzXszEGfd8zLKy1GIZB4xDCQjh3Bs6c4S0nx1EvVnUCia9zjyylhCxWDajpQB81MDk8M3l0D6ow1B0iE0bxpxY0jNrcZw9Xf2tZaA2IEbuzEqfZ/VCy1bIgqqRkJbVI9FjBc8KaCdvzd7m3fdpKnkmp1H9qD4X4tlz1Wwi1hw3DDr9OdHvJ+m3M0kfuIfWDDofG6eGk738bIWR1ZHggvJNJdpLX6D/q9GMn55F4A9QLIW+Fwm9EJCW9ADSBTS5abgL9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spotify-list\"\n        title=\"spotify-list\"\n        src=\"/static/ded221464d4a63dccad0a8421c57bfda/c5bb3/spotify_list.png\"\n        srcset=\"/static/ded221464d4a63dccad0a8421c57bfda/04472/spotify_list.png 170w,\n/static/ded221464d4a63dccad0a8421c57bfda/9f933/spotify_list.png 340w,\n/static/ded221464d4a63dccad0a8421c57bfda/c5bb3/spotify_list.png 680w,\n/static/ded221464d4a63dccad0a8421c57bfda/18c13/spotify_list.png 1005w\"\n        sizes=\"(max-width: 680px) 100vw, 680px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<h2>Taking Advantage of Free Computing Power</h2>\n<p>Great! We've done what we came here to do! Github lets us incorporate CI/CD for our project for free! But is that all we can do? </p>\n<p>Of course not! You'll notice that all we did was write a Python script that did stuff that was relevant to our project. But in fact, we could just write any random Python script to do tasks unrelated to the project and it would work just fine!</p>\n<p>Don't want to pay for a server? Don't want to deal with annoying server-side stuff? Just need to run a few scripts/programs regularly on a cronjob? No problem! Just create a new repository, set up the environment and then you're good to go! Github is really too generous and rich. </p>\n<p align=\"center\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 402px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/691f040c98dfa6bc40ad8828f807058f/5ed30/tmm.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHWkOBcH//EABoQAQACAwEAAAAAAAAAAAAAAAIAAwERIhL/2gAIAQEAAQUCoBAxLNbzwaX6PDn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAeEAACAgAHAAAAAAAAAAAAAAAAAQIhERIiMVFigf/aAAgBAQAGPwKL5Vjt1seGV6kiXUxcEf/EABwQAQADAAIDAAAAAAAAAAAAAAEAESExQWFxkf/aAAgBAQABPyGpIIW9kqmt3TvZQbd5bAi9HMr7GHQeHcpW+up//9oADAMBAAIAAwAAABAjz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAAIDAQADAAAAAAAAAAAAAAERACExQXGBof/aAAgBAQABPxA4CI5aAAcUrY0XECHhmRRGRBqX6naSFhQqmpmEWqXL6zGMfgn/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tmm\"\n        title=\"tmm\"\n        src=\"/static/691f040c98dfa6bc40ad8828f807058f/5ed30/tmm.jpg\"\n        srcset=\"/static/691f040c98dfa6bc40ad8828f807058f/651be/tmm.jpg 170w,\n/static/691f040c98dfa6bc40ad8828f807058f/d30a3/tmm.jpg 340w,\n/static/691f040c98dfa6bc40ad8828f807058f/5ed30/tmm.jpg 402w\"\n        sizes=\"(max-width: 402px) 100vw, 402px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<h3>Applying that to myself</h3>\n<p>As an example of how I took advantage of this, I decided that I shouldn't waste the hard-work that it took to create the Spotify access token, and try to solve one of my Spotify related problems:</p>\n<ul>\n<li>\n<p>Premise:</p>\n<ul>\n<li>I have a 'general' playlist, that is basically a carbon copy of my 'Liked Songs' library. I like to have this playlist because it's the playlist I pretty much only listen from (I'm weird I know), and I sometimes like to show people what playlist I normally listen.</li>\n</ul>\n</li>\n<li>\n<p>Problem:</p>\n<ul>\n<li>The problem is that every time I 'like' a song, it automatically gets added to the 'Liked Songs' library at the top. But when I select 'add to playlist', it gets added at the bottom of the 'general' playlist. This means when I play the 'general' playlist from the top, it messes up the order of the playlist. Even if I can sort the playlist by date added, it still requires an extra step to add the song to the playlist when I can just click 'like'.</li>\n</ul>\n</li>\n<li>\n<p>Solution:</p>\n<ul>\n<li>All I need, is for my current Python script to: </li>\n<li>Get the most recent 'Liked Songs'</li>\n<li>Get the 'general' playlist</li>\n<li>If you see a song in 'Liked Songs' that doesn't exist in 'general', prepend that song to the playlist. </li>\n</ul>\n</li>\n</ul>\n<p>And so, the code looks something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">def</span> <span class=\"token function\">find_index_of_latest_song</span><span class=\"token punctuation\">(</span>most_recent<span class=\"token punctuation\">,</span> liked_songs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">''' Finds the index in liked_songs that matches the most recent song in general_playlist '''</span>\n    result <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">for</span> song <span class=\"token keyword\">in</span> liked_songs<span class=\"token punctuation\">:</span>\n        name <span class=\"token operator\">=</span> song<span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span>\n        artist <span class=\"token operator\">=</span> song<span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'artists'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">if</span> name <span class=\"token operator\">==</span> most_recent<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">and</span> artist <span class=\"token operator\">==</span> most_recent<span class=\"token punctuation\">[</span><span class=\"token string\">'artists'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> result\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            result <span class=\"token operator\">=</span> result <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n\n<span class=\"token comment\"># After writing the new song list to the file:</span>\n\n<span class=\"token comment\"># UPDATING \"GENERAL\" PLAYLIST IF NEEDED</span>\n<span class=\"token comment\"># Playlist ID: 0fiu2hnAUGutQdNXuoQ46n</span>\n\n<span class=\"token comment\"># Get playlist</span>\nGENERAL_PLAYLIST_ID <span class=\"token operator\">=</span> <span class=\"token string\">'0fiu2hnAUGutQdNXuoQ46n'</span>\nplaylist_r <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'https://api.spotify.com/v1/playlists/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>GENERAL_PLAYLIST_ID<span class=\"token punctuation\">}</span></span><span class=\"token string\">?fields=tracks(items(track(name, uri, artists(name))))'</span></span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> auth_string_bearer<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ngeneral_playlist <span class=\"token operator\">=</span> playlist_r<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nindex <span class=\"token operator\">=</span> find_index_of_latest_song<span class=\"token punctuation\">(</span>general_playlist<span class=\"token punctuation\">[</span><span class=\"token string\">'tracks'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'items'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> liked_tracks<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># after we find our index, we just need to add all the songs from position 0 to index into our playlist</span>\n<span class=\"token keyword\">if</span> index <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token keyword\">and</span> index <span class=\"token operator\">&lt;=</span> <span class=\"token number\">25</span><span class=\"token punctuation\">:</span>\n    uri_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> pos <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        uri <span class=\"token operator\">=</span> liked_tracks<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'track'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'uri'</span><span class=\"token punctuation\">]</span>\n        uri_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span>\n    uri_list <span class=\"token operator\">=</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>uri_list<span class=\"token punctuation\">)</span>\n    requests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'https://api.spotify.com/v1/playlists/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>GENERAL_PLAYLIST_ID<span class=\"token punctuation\">}</span></span><span class=\"token string\">/tracks?position=0&amp;uris=</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>uri_list<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'Authorization'</span><span class=\"token punctuation\">:</span> auth_string_bearer<span class=\"token punctuation\">,</span> <span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>And now, it just works like a charm. My 'Liked Songs' library and 'general' playlist is completely in sync. And because of Github Actions, I get to do this syncing completely for free!</p>\n<blockquote>\n<p>It should be noted that Spotify probably already provides an easier way to do this, but just let me have my big brain moment.</p>\n</blockquote>\n<p align=\"center\" >\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 337px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2227085bca0ec056393a3ba675d431e1/f6b51/big_brain.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.11764705882352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABJ0AAASdAHeZh94AAAEX0lEQVQ4y5WUSW/bVhSF9Y/6J/oHsivaZRct0FUXbdEWsZ2h6RCgbYIuAgQB0hYdUiVx7DhwnHiUZVnWRFMUJWqiSJGaaVmDLVvj12sHXRRdlcABCT6+884951760nqKeDxOu33MdDohENjBcV16vS6VSoVev8/FNZvN/o3p7L/vBL7H/sfcvPkVCzdukcsaXJuf4/Z3t7l79y7XFuZYfLbM/7l8Xq1Ko+Kw9OQJZdvGrVbxjo6wnDLFkkm70+FsOGQynV7eh4JBt0+76TEejZgIxqenjAfngjN8zcMDuukkPUG+VKDQblOo1bCP25TaR+QbdbL1GlazieG4JDJZ3IcvyHz2E/mVAK7nUT2I4oVi1Pci+BrqPl09RiOlkBfPNFGWtsvkRGlanhUhyJQrZN2qoEYsV6S8ESfxcJlbH37GQTqPLd+09kJ4YSE8yimcmBpNKy8qPDTTQitaGOUa2UoTNXaIrmZIGBZ5p46Wd+SbihCXuHLlPX59tEyu6FCPROkkFHwdO8vQLeJaJXSrKhtsDmNJDKsmG6tkVDlMjxNO6ATiWdKmw2HaxKp3+eiDj7k6/y1Zq05NubBNw9etmpzXTHL5IkkhiCczFJQEqaJLVDaqhzonloajxdh4FWBzXyMuahquxdznN3n3nffFihbVpMaoYODreS6j44YQmiQNW/pQzM0mSabyxNI2e6EErhohsOjnxhe3uHfnPjvBOPVSls2VRd6a/5p1vUgzm2PimvgGnQactTELBZRUiehWmFxwneDSMwqqiq2rnBWTlFMqb1+9x/d/LlLS0kQNl46Z4YetdZ6GFFrFItNmVQjbLTjv4tUqHCQyZMIxoqsrfDl/B3XjNXgmuAYjJ4c/FiWfkfJjEVQ1SVVXqIoVwYiGbWThuIXvpOMxHfQZ9zpEwmJ+8KKFEsz511ja3YVGgUnZkHIMMHW6ewGqSoiBlYR6jr6oj+4rZFVZ7x3hO+17jEQhZ32sXIHfn+5Q2pdmz0hqQjC0dWaunF7JcnrRXtqBqE0zq+YFOcZumuBakNxhGvptIezJCA27zEZ9OjIV/qUAgec7oEQYSTgTx2AqhIPym7RraoiRnb4ku8CkYvB6cZN0VGMmXL6BKJwMe8zGJ3S8Oge7cZb8mzTj+1KSqBDCc/tCqSioF2jIqLYOI9AsMqvkGLkZXj3dJrGVYNxuvFE4EYVTUdi7aB81zZbM6PVPFqgoCoOCJuUal+ioYcztIOZBnLGjXx5wUtRYfbTF9pMAnbL9D2HvkvCk6wmhjq3kWPj0Oj9+84C1vzYJrWwTW3mJ/vNv5Nf3KcQMappyWcGZJRP0Ypfg830c8VFCOWI67IuHpwxOjqlYFoVwimI4ySsh8z9Y5Y/7q7x8uEbJvyxrivSkiRNPMZCQaOQ5kvC8ZotGTMd3LHUPTzqc948ZCOqOgxlJY8uIBRdDbEhIycWXGL/4yfqX0LbjFHblV7cRpZWMMq0aElYKR1Fp+bf4G+HXPVHwetHvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"big_brain\"\n        title=\"big_brain\"\n        src=\"/static/2227085bca0ec056393a3ba675d431e1/f6b51/big_brain.png\"\n        srcset=\"/static/2227085bca0ec056393a3ba675d431e1/04472/big_brain.png 170w,\n/static/2227085bca0ec056393a3ba675d431e1/f6b51/big_brain.png 337w\"\n        sizes=\"(max-width: 337px) 100vw, 337px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</p>\n<h2>Conclusion</h2>\n<p>There we have it. I have learnt to run a simple cronjob using Github Actions that updates my website using data from a web API. There is so much more that we can do with Github Actions and there are a lot of custom Actions out there that make CI/CD so much more simpler for us. So go out there, have a look and explore! </p>\n<p>Feel free to reference the code for this website on Github!</p>","frontmatter":{"date":"July 1st 2021","path":"/posts/python/spotify-bot","title":"Learning about Github Actions and how to automate my personal Spotify mix","topic":"Python, Github Actions"}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}